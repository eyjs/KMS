stateDiagram-v2
    [*] --> DRAFT: 문서 생성<br/>파일 업로드 또는 메타데이터만

    DRAFT --> DRAFT: 분류 수정<br/>파일 첨부<br/>보안등급 변경
    DRAFT --> ACTIVE: 활성화<br/>SSOT 검증 통과 필수

    ACTIVE --> DEPRECATED: 만료 처리

    state ACTIVE {
        [*] --> FRESH: reviewedAt 또는 updatedAt 기준
        FRESH --> WARNING: 30일 경과
        WARNING --> EXPIRED: 90일 경과
    }

    note right of DRAFT
        파일 업로드 / 메타데이터만 / 파일 후속 첨부
        분류·보안등급 수정 가능
        낙관적 잠금(rowVersion) 적용
    end note

    note right of ACTIVE
        동일 분류 경로에 ACTIVE 1개만 허용 (SSOT)
        신선도 자동 추적: FRESH → WARNING → EXPIRED
        수정 시 updatedAt 자동 갱신
    end note

    note right of DEPRECATED
        종료 상태 — 전환 불가
        조회·다운로드는 가능
        검색 결과에 포함
    end note
