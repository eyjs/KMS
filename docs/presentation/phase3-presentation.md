# Phase 3: 데이터 처리 확장

> 발표용 스크립트 | NotebookLM PPT 생성용
> 상태: 선택적 (조건부 진행)

---

# 슬라이드 1: 표지

**Phase 3: 데이터 처리 확장**

*"조건이 맞으면, 더 나아간다"*

iFA 보험대리점 | 2026년 하반기~ (조건부)

---

# 슬라이드 2: Phase 3 위치

## 선택적 확장 단계

### 전체 로드맵

```
Phase 1 (완료)     Phase 2 (현재)      Phase 3 (선택적)
─────────────────────────────────────────────────────────
분류체계 검증  →   체계 관리 시스템  →   데이터 처리 확장
                        │
                        │ 조건 충족?
                        ▼
                   ┌─────────┐
                   │ YES │ NO │
                   └──┬──┴──┬─┘
                      │     │
              Phase 3 진행  Phase 2 + 외주 유지
```

### Phase 3의 의미

```
Phase 2: 문서 "관리"에 집중 (저장, 분류, 관계)
Phase 3: 문서 "처리"까지 확장 (파싱, NLP, 벡터화)

Phase 3 = Phase 2 + Python 코어 엔진
```

---

# 슬라이드 3: 진입 조건

## 3가지 조건 모두 충족 필요

### 조건 1: Phase 2 안정화

```
필요 기간: 6개월 이상 운영

확인 사항:
├── 시스템 가동률 99% 이상
├── 주요 버그 해결 완료
├── 사용자 피드백 반영 완료
└── IT팀 자체 운영 가능
```

### 조건 2: 예산 확보

```
필요 예산: 5,000만원 이상

내역:
├── Python 개발: 3,000만원
├── 인프라 확장: 1,000만원
└── 운영/유지보수: 1,000만원
```

### 조건 3: 인력 확보

```
필요 인력:

옵션 A: Python 개발자 채용 (1명 이상)
옵션 B: 전문 외주 업체 계약 (장기)

조건:
├── PDF 파싱 경험
├── 한글 NLP 경험
└── 벡터 DB 경험
```

---

# 슬라이드 4: 조건 미충족 시

## Plan B: Phase 2 + 외주 유지

### 현실적 시나리오

```
많은 기업이 Phase 3 없이 운영:

[우리 시스템]
문서 저장 + 분류 + 관계 + 뷰어
     │
     │ API
     ▼
[외주 RAG 업체]
텍스트 추출 + NLP + 챗봇

→ 핵심 기능은 동작
→ 데이터는 우리가 소유
→ 비용은 외주에 지불
```

### 외주 유지의 장단점

| 장점 | 단점 |
|------|------|
| 초기 투자 없음 | 월 비용 지속 |
| 전문 업체 품질 | 업체 의존 |
| 빠른 도입 | 커스터마이징 한계 |
| 리스크 분산 | 데이터 외부 전송 |

---

# 슬라이드 5: Phase 3 목표

## 문서 처리 내재화

### 외주 → 내재화

| 기능 | Phase 2 | Phase 3 |
|------|---------|---------|
| PDF 텍스트 추출 | 외주 | 직접 |
| 한글 NLP | 외주 | 직접 |
| 문서 분류 자동화 | 외주 | 직접 |
| 벡터 검색 | 외주 | 직접 |
| RAG 챗봇 | 외주 | 직접 |

### 내재화의 의미

```
Before (Phase 2):
문서 업로드 → API 호출 → 외주 처리 → 결과 수신

After (Phase 3):
문서 업로드 → 내부 Python 엔진 처리 → 즉시 결과

차이:
├── 외부 의존 제거
├── 비용 절감 (장기)
├── 커스터마이징 자유
└── 데이터 외부 전송 없음
```

---

# 슬라이드 6: 기술 스택 추가

## Python 코어 엔진

### Phase 3 추가 스택

| 영역 | 기술 | 용도 |
|------|------|------|
| 런타임 | Python 3.11+ | 코어 엔진 |
| PDF 파싱 | pdfplumber | 텍스트/테이블 추출 |
| 한글 NLP | Kiwi, KoNLPy | 형태소 분석 |
| 임베딩 | sentence-transformers | 벡터 생성 |
| 벡터 DB | pgvector | PostgreSQL 확장 |
| 컨테이너 | Docker | Python 환경 격리 |

### 기존 스택 유지

```
Vue 3 + .NET Core + PostgreSQL (Phase 2)
          +
Python Core Engine (Phase 3 추가)
```

---

# 슬라이드 7: 아키텍처 변경

## Python 엔진 추가

### Phase 2 아키텍처

```
┌─────────────────┐
│    Vue 3 UI     │
└────────┬────────┘
         │
┌────────▼────────┐
│  .NET Core API  │
└────────┬────────┘
         │
┌────────▼────────┐     ┌─────────────┐
│   PostgreSQL    │     │  외주 RAG   │
└─────────────────┘     └─────────────┘
```

### Phase 3 아키텍처

```
┌─────────────────┐
│    Vue 3 UI     │
└────────┬────────┘
         │
┌────────▼────────┐
│  .NET Core API  │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
┌───▼───┐ ┌───▼───────────┐
│Postgres│ │Python Engine │ ← 추가
│        │ │(Docker)      │
│+pgvector│ │- PDF 파싱    │
│        │ │- NLP        │
│        │ │- 임베딩     │
└────────┘ └──────────────┘
```

---

# 슬라이드 8: PDF 텍스트 추출

## pdfplumber 활용

### 기능

```python
import pdfplumber

def extract_text(pdf_path):
    with pdfplumber.open(pdf_path) as pdf:
        text = ""
        for page in pdf.pages:
            text += page.extract_text()
    return text

def extract_tables(pdf_path):
    with pdfplumber.open(pdf_path) as pdf:
        tables = []
        for page in pdf.pages:
            tables.extend(page.extract_tables())
    return tables
```

### 성능

| 항목 | 수치 |
|------|------|
| 텍스트 추출 정확도 | 95~98% |
| 테이블 추출 정확도 | 90~95% |
| 처리 속도 | 10페이지/초 |
| 한글 지원 | 완벽 |

---

# 슬라이드 9: 한글 NLP

## 형태소 분석

### Kiwi 활용

```python
from kiwipiepy import Kiwi

kiwi = Kiwi()

def analyze(text):
    result = kiwi.analyze(text)
    return result[0][0]  # 최적 분석 결과

# 예시
text = "KB손해보험 든든어린이 상품설명서"
tokens = analyze(text)

# 결과:
# [('KB손해보험', 'NNP'),   ← 고유명사 (보험사)
#  ('든든', 'NNG'),         ← 일반명사
#  ('어린이', 'NNG'),       ← 일반명사
#  ('상품', 'NNG'),
#  ('설명서', 'NNG')]       ← 문서유형
```

### 활용

```
파일명 파싱:
"KB손해_든든어린이_상품요약_202602.pdf"

자동 추출:
├── 보험사: KB손해보험 (유사도 매칭)
├── 상품: 든든 어린이보험 (기존 데이터 매칭)
├── 문서유형: 상품요약본 (키워드 매칭)
└── 날짜: 2026년 2월 (정규식)
```

---

# 슬라이드 10: 벡터 검색

## pgvector 활용

### 벡터 저장

```sql
-- PostgreSQL + pgvector 확장
CREATE EXTENSION vector;

CREATE TABLE document_embeddings (
    document_id UUID PRIMARY KEY,
    embedding vector(768),  -- 768차원 벡터
    model_version VARCHAR(50),
    created_at TIMESTAMP
);
```

### 유사 문서 검색

```sql
-- "어린이 보험 보장 내용"과 유사한 문서 찾기
SELECT d.file_name, e.embedding <-> query_vector AS distance
FROM documents d
JOIN document_embeddings e ON d.id = e.document_id
ORDER BY distance
LIMIT 10;
```

### 활용

```
사용자: "어린이 보험 보장 내용 알려줘"
         ↓
시스템: 질문을 벡터로 변환
         ↓
시스템: 유사한 벡터를 가진 문서 검색
         ↓
결과: 관련 상품설명서, 약관 목록 반환
```

---

# 슬라이드 11: RAG 챗봇

## 문서 기반 질의응답

### RAG 파이프라인

```
[사용자 질문]
"삼성생명 종신보험 해지 환급금 계산 방법은?"
         │
         ▼
[1. 질문 벡터화]
sentence-transformers로 임베딩
         │
         ▼
[2. 관련 문서 검색]
pgvector로 유사 문서 찾기
         │
         ▼
[3. 컨텍스트 구성]
검색된 문서 내용 + 질문 조합
         │
         ▼
[4. LLM 응답 생성]
Claude/GPT로 답변 생성
         │
         ▼
[응답]
"삼성생명 종신보험의 해지 환급금은..."
```

### 장점

```
- 최신 문서 기반 응답
- 출처 명시 가능
- 할루시네이션 감소
- 보험 도메인 특화
```

---

# 슬라이드 12: 자동 분류

## 업로드 시 자동 제안

### 파이프라인

```
[파일 업로드]
"KB손해_든든어린이_상품요약_202602.pdf"
         │
         ▼
[1. 파일명 파싱]
NLP로 토큰 추출
         │
         ▼
[2. 기존 데이터 매칭]
보험사/상품 마스터와 유사도 비교
         │
         ▼
[3. 본문 분석 (선택)]
PDF 텍스트로 문서유형 추론
         │
         ▼
[4. 분류 제안]
├── 보험사: KB손해보험 (95% 확신)
├── 상품: 든든 어린이보험 (87% 확신)
└── 문서유형: 상품요약본 (92% 확신)
         │
         ▼
[사용자 확인/수정]
```

### 효과

```
Before: 담당자가 수동으로 분류 선택 (5분)
After: 시스템이 제안, 담당자가 확인 (30초)

시간 절감: 90%
오류 감소: 분류 실수 방지
```

---

# 슬라이드 13: Docker 배포

## Python 환경 격리

### 왜 Docker인가

```
문제:
- IT팀이 Python 직접 운영 어려움
- 의존성 관리 복잡
- 버전 충돌 가능

해결:
- Docker 컨테이너로 완전 격리
- 이미지만 배포하면 끝
- IT팀은 Docker만 관리
```

### Dockerfile 예시

```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### 운영

```bash
# 빌드
docker build -t kms-python-engine .

# 실행
docker run -d -p 8000:8000 kms-python-engine

# 업데이트
docker pull kms-python-engine:latest
docker-compose up -d
```

---

# 슬라이드 14: 비용 분석

## 외주 vs 내재화

### 초기 비용

| 항목 | 외주 유지 | Phase 3 |
|------|----------|---------|
| 개발 | 0원 | 3,000만원 |
| 인프라 | 기존 | +1,000만원 |
| 합계 | 0원 | 4,000만원 |

### 연간 운영 비용

| 항목 | 외주 유지 | Phase 3 |
|------|----------|---------|
| 외주 비용 | 1,200만원/년 | 0원 |
| 서버 | 120만원/년 | 240만원/년 |
| 인력 | 0원 | 인건비 (기존 인력) |
| 합계 | 1,320만원/년 | 240만원/년 |

### 손익분기점

```
초기 투자: 4,000만원
연간 절감: 1,080만원

손익분기점: 약 3.7년

→ 4년차부터 수익
→ 장기 운영 시 유리
```

---

# 슬라이드 15: 리스크

## Phase 3 리스크

### 기술 리스크

| 리스크 | 대응 |
|--------|------|
| Python 운영 역량 부족 | Docker 격리 + 외부 지원 |
| 성능 문제 | 비동기 처리 + 캐싱 |
| 모델 정확도 | 지속적 튜닝 + 피드백 |

### 비즈니스 리스크

| 리스크 | 대응 |
|--------|------|
| 투자 대비 효과 미미 | Phase 2만으로도 핵심 가치 |
| 인력 이탈 | 문서화 + 지식 이전 |
| 기술 변화 | 모듈화로 교체 용이 |

### 최악의 경우

```
Phase 3 실패해도:
- Phase 2는 그대로 동작
- 외주 RAG로 복귀 가능
- 데이터 손실 없음

→ 리스크 제한적
```

---

# 슬라이드 16: 일정 (가정)

## 조건 충족 시 일정

### 전제

```
- Phase 2: 2026년 3~5월 완료
- 안정화: 2026년 6~11월 (6개월)
- Phase 3 착수: 2026년 12월~
```

### Phase 3 마일스톤

| 주차 | 마일스톤 |
|------|----------|
| W1-2 | Python 환경 구축, Docker 설정 |
| W3-4 | PDF 파싱 모듈 개발 |
| W5-6 | NLP 모듈 개발 |
| W7-8 | 자동 분류 연동 |
| W9-10 | pgvector 설정, 벡터 생성 |
| W11-12 | RAG 파이프라인 구축 |
| W13-16 | 테스트, 안정화, 이관 |

**총 기간: 4개월**

---

# 슬라이드 17: 완료 기준

## Phase 3 체크리스트

| 기준 | 측정 방법 |
|------|----------|
| PDF 텍스트 추출 | 정확도 95% 이상 |
| 테이블 추출 | 정확도 90% 이상 |
| 형태소 분석 | Kiwi 동작 확인 |
| 파일명 자동 분류 | 제안 정확도 80% 이상 |
| 벡터 생성 | 모든 ACTIVE 문서 벡터화 |
| 유사 문서 검색 | 응답 시간 1초 이내 |
| RAG 챗봇 | 관련 문서 기반 응답 |
| Docker 배포 | IT팀 운영 가능 |
| 외주 종료 | API 호출 0건 |

---

# 슬라이드 18: 의사결정 포인트

## Phase 3 진행 여부 판단

### 판단 시점

```
Phase 2 완료 후 6개월 (2026년 11월)
```

### 판단 기준

| 조건 | 체크 |
|------|------|
| Phase 2 가동률 99%+ | [ ] |
| 주요 버그 없음 | [ ] |
| 사용자 만족도 4점+ | [ ] |
| 예산 5,000만원 확보 | [ ] |
| Python 인력 확보 | [ ] |

### 결정

```
5개 조건 모두 충족 → Phase 3 진행
1개 이상 미충족 → Phase 2 + 외주 유지

→ 무리하게 진행하지 않음
→ 조건 충족 시까지 대기
```

---

# 슬라이드 19: 대안 검토

## Phase 3 대신

### 대안 1: 외주 장기 계약

```
현재 RAG 업체와 장기 계약
- 비용 협상 (10~20% 할인)
- SLA 강화
- 데이터 보안 조항

장점: 투자 없음, 안정적
단점: 지속 비용, 의존
```

### 대안 2: 하이브리드

```
일부만 내재화:
- PDF 파싱: 직접 (단순)
- NLP/RAG: 외주 유지 (복잡)

장점: 투자 적음, 리스크 분산
단점: 복잡성 증가
```

### 대안 3: SaaS 전환

```
전문 문서관리 SaaS 도입:
- Notion, Confluence 등
- 또는 보험 특화 솔루션

장점: 즉시 사용
단점: 커스터마이징 한계, 비용
```

---

# 슬라이드 20: 결론

## Phase 3 요약

### 목적

```
문서 처리를 외주에서 내부로 전환
데이터 처리까지 완전한 주권 확보
```

### 조건

```
1. Phase 2 안정화 (6개월+)
2. 예산 확보 (5,000만원+)
3. 인력 확보 (Python 개발자)

→ 3가지 모두 충족 시 진행
→ 미충족 시 Phase 2 + 외주 유지
```

### 기대 효과

```
장기적:
├── 외주 비용 절감
├── 커스터마이징 자유
├── 데이터 외부 전송 없음
└── 완전한 기술 주권
```

### 핵심 메시지

> "급하게 가지 않는다. 조건이 맞을 때 진행한다."

---

**문서 끝**
